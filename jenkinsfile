pipeline{
	agent any 
	environment{
		Dockerhub_Credentials=credentials('dockerhub')
		}
	stages{
		stage('git checkout'){
			steps{
				checkout scmGit (branches: [[name: '*/dev']],userRemoteConfigs: [[credentialsId: 'Github_id', url: 'https://github.com/swetank01/open-microapp.git']])
			}
		}
		stage('docker build'){
			steps{
				script{
					def dockerimage='sewani/frontend_microapp'
					sh "docker build -t ${dockerimage}:${env.BRANCH_NAME}"
					}
				}
			}
		stage('docker login'){
			steps{
				script{
					sh 'echo $DOCKERHUB_CREDENTIALS_PSW | docker login -u $DOCKERHUB_CREDENTIALS_USR --password-stdin'
					}
				}
			}
	}
}
